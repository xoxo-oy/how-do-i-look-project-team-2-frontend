// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
  shadowDatabaseUrl = env("SHADOW_DATABASE_URL")
}

model Style {
  id            Int        @id @default(autoincrement())
  title         String
  nickname      String
  content       String
  password      String
  viewCount     Int        @default(0)
  curationCount Int        @default(0)
  createdAt     DateTime   @default(now())
  image         Image[]
  tag           Tag[]      @relation("StyleTags")
  item          Item[]
  curating      Curating[]
}

model Image {
  id        Int    @id @default(autoincrement())
  imageUrls String
  style     Style  @relation(fields: [styleId], references: [id], onDelete: Cascade)
  styleId   Int
}

model Tag {
  id    Int     @id @default(autoincrement())
  tags  String  @unique
  style Style[] @relation("StyleTags")
}

model Item {
  id         Int      @id @default(autoincrement())
  name       String
  brand      String
  price      Float
  categories Category
  style      Style    @relation(fields: [styleId], references: [id], onDelete: Cascade)
  styleId    Int
}

enum Category {
  top
  bottom
  outer
  dress
  shoes
  bag
  accessory
}

model Curating {
  id                Int      @id @default(autoincrement())
  nickname          String
  content           String
  password          String
  trendy            Int      @default(0)
  personality       Int      @default(0)
  practicality      Int      @default(0)
  costEffectiveness Int      @default(0)
  createdAt         DateTime @default(now())
  style             Style    @relation(fields: [styleId], references: [id], onDelete: Cascade)
  styleId           Int
  Comment           Comment?
}

model Comment {
  id         Int      @id @default(autoincrement())
  content    String
  createdAt  DateTime @default(now())
  curating   Curating @relation(fields: [curatingId], references: [id], onDelete: Cascade)
  curatingId Int      @unique
}
